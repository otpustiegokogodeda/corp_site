{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{% block title %}My Site{% endblock %}</title>
  {% tailwind_css %}
  <style>
    :root {
      --color-white: #ffffff;
      --color-gold-brown: #c49360;
      --color-dark-brown: #653c19;
    }
    body {
      background-color: var(--color-white);
      color: var(--color-dark-brown);
      font-family: sans-serif;
    }
    header {
      background-color: var(--color-dark-brown);
      color: var(--color-white);
    }
    header img {
      height: 48px;
    }
    .popup-container {
      background-color: var(--color-white);
      color: var(--color-dark-brown);
    }
    .popup-button {
      background-color: var(--color-gold-brown);
      color: var(--color-white);
    }
    .popup-button:hover {
      background-color: var(--color-dark-brown);
    }
    footer {
      background-color: var(--color-dark-brown);
      color: var(--color-white);
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .animate-fadeIn {
      animation: fadeIn 0.3s ease-in-out;
    }
  </style>
</head>
<body>

<header class="bg-[#c49360] flex justify-between items-center px-6 py-4">
  <div class="flex justify-center w-full">
    <img src="{% static 'images/logo3.png' %}" alt="Логотип" class="h-20 md:h-28 object-contain">
  </div>

  <div class="absolute right-6">
    {% if user.is_authenticated %}
      {% if user.role == 'admin' or user.role == 'manager' %}
        <a href="{% url 'crm_integration:crm_clients' %}"  class="bg-[#653c19] text-white px-4 py-2 rounded hover:bg-[#4d2c13]">
        Клиенты
        </a>
      {% endif %}
      <a href="{% url 'clients:dashboard' %}" class="bg-[#653c19] text-white px-4 py-2 rounded hover:bg-[#4d2c13]">
        Профиль
      </a>
      <a href="{% url 'clients:logout' %}" class="bg-[#653c19] text-white px-4 py-2 rounded hover:bg-[#4d2c13]">
        Выход
      </a>
      <a href="{% url 'banners:banner_list' %}"  class="bg-[#653c19] text-white px-4 py-2 rounded hover:bg-[#4d2c13]">
          Баннеры
      </a>
      <a href="{% url 'crm_integration:create_lead' %}"  class="bg-[#653c19] text-white px-4 py-2 rounded hover:bg-[#4d2c13]">
        Заказ
      </a>
    {% else %}
      <a href="{% url 'clients:register' %}" class="bg-[#653c19] text-white px-4 py-2 rounded hover:bg-[#4d2c13]">
        Регистрация
      </a>
          <a href="{% url 'login' %}" class="bg-[#653c19] text-white px-4 py-2 rounded hover:bg-[#4d2c13]">
        Вход
      </a>
    {% endif %}
  </div>
</header>

<main class="max-w-6xl mx-auto p-6">
  {% block content %}{% endblock %}
</main>

{% for popup in popup_notifications %}
<div id="popup-{{ popup.id }}" 
     class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 animate-fadeIn">
  
  <div class="bg-white text-black rounded-lg shadow-lg p-6 max-w-sm w-full relative transform transition-all scale-100">
    <button onclick="document.getElementById('popup-{{ popup.id }}').remove()" 
            class="absolute top-3 right-3 text-gray-500 hover:text-gray-800">
      ✖
    </button>

    <h3 class="text-xl font-bold mb-3 text-center">{{ popup.title }}</h3>
    <p class="mb-6 text-center">{{ popup.message }}</p>

    <div class="flex justify-center">
      <button onclick="document.getElementById('popup-{{ popup.id }}').remove()" 
              class="bg-blue-600 text-white px-5 py-2 rounded hover:bg-blue-700">
        Закрыть
      </button>
    </div>
  </div>
</div>
{% endfor %}

<footer class="py-4 text-center text-sm">
  &copy; {{ now|date:"Y" }} BUSSINES LEV. Все права защищены.
</footer>

</body>
</html>